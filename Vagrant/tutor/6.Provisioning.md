## Manual baked provisioning

```
$ cd ~
$ mkdir project/baked-lamp
$ cd project/baked-lamp
$ vagrant init chef/centos-6.5
$ ls
$ vim Vagrantfile
config.vm.network "forwarded_port", guest: 80, host: 8080
$ vagrant up
$ vagrant ssh
$ sudo yum update -y
$ sudo yum install nano git unzip screen
$ sudo yum install httpd httpd-devel httpd-tools
$ sudo chkconfig --add httpd
$ sudo chkconfig httpd on
$ sudo service httpd stop
$ cd /var/www/html
$ ls
$ cd ..
$ ls
$ sudo rm -rf html
$ sudo ln -s /vagrant /var/www/html
$ ls
<See html folder is there>
$ exit
$ ls
$ vim index.html
<html>
	<p>Hello from the Host</p>
</html>
$ ls
$ vagrant ssh
$ sudo service httpd start
$ exit
# In the browser "http://localhost:8080"
<Apache running now>
$ vagrant ssh
$ sudo yum install -y php php-cli php-common php-devel php-mysql
$ sudo service httpd start
$ exit
$ vim info.php
<?php
phpinfo();
?>
$ ls
# In the browser "http://localhost:8080/info.php"
<Php is working with apache>
$ vagrant ssh
$ sudo yum install -y mysql mysql-server mysql-devel 
$ sudo chkconfig -add mysqld
$ sudo chkconfig mysqld on
$ sudo service mysqld start
$ mysql -u root -e "CREATE DATABASE IF NOT EXISTS dev_test"; 
$ mysql -u root -e "SHOW DATABASES"; 
$ exit
$ vagrant help package
$ vagrant status
$ vagrant package --output centos-lamp.box 
$ ls 
$ vagrant box add centos-lamp centos-lamp.box
$ cd ..
$ mkdir test-lamp
$ cd test-lamp
$ vagrant box list
$ vagrant init centos-lamp
$ ls
$ vim Vagrantfile
config.vm.network "forwarded_port", guest: 80, host: 8080
$ vagrant plugin install vagrant-vbguest
$ vagarant up
$ vim index.html
<html>
	<h1>Hello from the lamp stack</h1>
</html>
# In the browser "http://localhost:8080"
```

## File Provisioner Commands
```
$ mkdir vagrant 
$ cd vagrant/ 
$ mkdir files 
$ cd files 
$ which git 
$ git config --global user.name "Bershin John" # replace with your actual name 
$ git config --global user.email "bershin.john@gmail.com" # replace with your email 
$ git config --global --list 
$ cat ~/.gitconfig 
$ cp ~/.gitconfig git-config 
$ ls 
$ cd ~ 
$ cd projects/ 
$ ls 
$ mkdir git-box 
$ cd git-box/ 
$ vagrant box list 
$ vagrant init chef/centos-6.5 
$ vagrant plugin list 
$ mate Vagrantfile # disable vbguest auto update in vm
config.vbguest.auto_update = false
$ vagrant up 
$ vagrant ssh
$ pwd 
$ ls -la 
$ exit 
$ mate Vagrantfile # configure file provisioner 
config.vm.provision "file",
#source: "c:\\path\\to\\file.txt"
source: "~/vagrant/files/git-config",
destination: "~/.gitconfig"
$ vagrant status
$ vagrant provision 
<Run the provisioning scripts or command>
$ vagrant ssh 
$ ls -al 
$ cat .gitignore 
$ exit 
$ vagrant destroy 
$ vagrant up 
$ vagrant ssh
$ ls -al
$ cat .gitconfig
$ exit
$ vagrant destroy
```

## Shell Provisioner
$ cd git-box
$ ls
$ vagarant status
$ vim Vagarantfile

#test fi mate Vagrantfile # config inline shell script vagrant up vagrant ssh which git git version exit mate Vagrantfile # config heredoc shell script vagrant status vagrant provision clear mate Vagrantfile cd cd vagrant/ ls mkdir scripts cd scripts/ mate provision.sh ls pwd cd ~/projects/git-box/ mate Vagrantfile # config external shell script vagrant destroy vagrant up vagrant ssh git version which nano exit vagrant destroy LAMP Stack Provisioning Commands Commands pwd cd projects/ mkdir baked-lamp cd baked-lamp vagrant init chef/centos-6.5 mate Vagrantfile # enable port forwarding vagrant ssh # enter VM clear sudo yum update -y clear sudo yum install -y nano git unzip screen clear sudo yum install -y httpd httpd-devel httpd-tools clear sudo chkconfig --add httpd sudo chkconfig httpd on sudo service httpd stop cd /var/www/html ls cd .. ls sudo rm -rf html ls sudo ln -s /vagrant /var/www/html exit ls mate index.html ls pwd vagrant ssh # back into VM sudo service httpd start exit vagrant ssh clear sudo yum install -y php php-cli php-common php-devel php-mysql sudo service httpd restart exit pwd mate info.php ls vagrant ssh clear sudo yum install -y mysql mysql-server mysql-devel sudo chkconfig --add mysqld sudo chkconfig mysqld on sudo service mysqld start mysql -u root -e "CREATE DATABASE IF NOT EXISTS dev_test"; mysql -u root -e "SHOW DATABASES"; exit vagrant help package vagrant status vagrant package --output centos-lamp.box clear ls vagrant box add centos-lamp centos-lamp.box cd .. clear mkdir test-lamp cd test-lamp/ vagrant box list vagrant init centos-lamp mate Vagrantfile clear vagrant plugin install vagrant-vbguest clear vagrant up ls mate index.html
<!--stackedit_data:
eyJoaXN0b3J5IjpbLTU3MDgzNTQzLDYxNjY2NTk0NCw2MTY2Nj
U5NDQsMTY2MDcwNTAzNywtNzY1MzczNjc0LDczMDk5ODExNl19

-->